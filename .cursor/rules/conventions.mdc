---
description: 
globs: 
alwaysApply: true
---
# Project Conventions & Rules

## ğŸš¨ CRITICAL RULES - ALWAYS FOLLOW

### Package Version Management
**NEVER ASSUME OR HALLUCINATE PACKAGE VERSIONS**

- âŒ **DO NOT** specify package versions without confirmation
- âœ… **ALWAYS ASK** the user for latest stable versions when adding:
  - `package.json` dependencies  
  - `requirements.txt` (Python projects)
  - `pyproject.toml` (Python projects)
  - `Cargo.toml` (Rust projects)
  - Any dependency management files

**Process:**
1. Identify packages needed
2. Ask user: "What are the current stable versions for: [package1], [package2], etc.?"  
3. Wait for user confirmation before adding to project files
4. Use EXACT versions provided by user

**Rationale:** Incorrect versions cause:
- Dependency conflicts
- Build failures  
- Security vulnerabilities
- Compatibility issues

## Development Workflow Rules

### Multi-Agent System Protocol
**Current Project Uses Planner-Executor Pattern**

- **Planner Mode**: High-level analysis, task breakdown, documentation updates
- **Executor Mode**: Implementation, coding, testing, progress reporting
- **Always** update `.cursor/scratchpad.md` with progress
- **Report** completion of each task before moving to next
- **Ask** for permission to switch modes when appropriate

### Code Quality Standards

#### TypeScript Projects
- âœ… Always use TypeScript for type safety
- âœ… Define interfaces/types in dedicated `types/` directory
- âœ… Use `zod` for runtime validation when needed
- âœ… Proper error handling with try-catch blocks
- âœ… Environment variable validation

#### Project Structure
- âœ… Modular architecture with clear separation of concerns
- âœ… Consistent naming conventions (camelCase for files, PascalCase for types)
- âœ… Clear directory structure as defined in planning
- âœ… Separate configuration, utilities, and business logic

### Security & Best Practices

#### Environment Variables
- âœ… Never hardcode API keys or secrets
- âœ… Always use `.env` files with `.env.example` template
- âœ… Add `.env` to `.gitignore`
- âœ… Validate required environment variables on startup

#### Error Handling
- âœ… Implement graceful error handling
- âœ… Provide meaningful error messages
- âœ… Log errors appropriately (without exposing secrets)
- âœ… Implement fallback behaviors when possible

#### Rate Limiting & API Usage
- âœ… Implement rate limiting for external APIs
- âœ… Handle API quota limits gracefully
- âœ… Cache responses when appropriate
- âœ… Implement retry logic with exponential backoff

## Documentation Standards

### Code Documentation
- âœ… Document complex functions with JSDoc comments
- âœ… Include examples for utility functions
- âœ… Document API interfaces and expected behavior
- âœ… Update README.md with setup and usage instructions

### Progress Tracking
- âœ… Update scratchpad.md after each completed task
- âœ… Document lessons learned and solutions to problems
- âœ… Record any deviations from original plan with rationale
- âœ… Keep project status board current

## Testing & Deployment

### Testing Requirements
- âœ… Test each functionality before moving to next task
- âœ… Manual testing for user-facing features
- âœ… Verify error handling scenarios
- âœ… Test with realistic data/scenarios

### Deployment Preparation
- âœ… Ensure all environment variables are documented
- âœ… Provide clear setup instructions
- âœ… Test in production-like environment when possible
- âœ… Document any deployment-specific configurations

## Communication Protocols

### With User
- âœ… Always confirm package versions before installation
- âœ… Report task completion with success criteria verification
- âœ… Ask for clarification when requirements are unclear
- âœ… Provide regular progress updates
- âœ… Explain technical decisions and trade-offs

### Error Resolution
- âœ… Document solutions to errors in "Lessons Learned"
- âœ… Don't loop more than 3 times on same error
- âœ… Ask for help when stuck rather than guessing
- âœ… Provide full context when requesting assistance

## Technology-Specific Conventions

### AI SDK (Vercel) Projects
- âœ… Use `generateText` for simple responses
- âœ… Use `streamText` for real-time chat interfaces
- âœ… Implement `maxSteps` for complex multi-step reasoning
- âœ… Properly handle conversation context/history
- âœ… Use structured outputs with `zod` schemas when needed

### Telegram Bot Projects
- âœ… Use polling mode for development, webhooks for production
- âœ… Implement proper command handling (starting with `/`)
- âœ… Handle different message types appropriately
- âœ… Implement user rate limiting
- âœ… Graceful handling of Telegram API rate limits

### Node.js Projects
- âœ… Use `tsx` for TypeScript execution in development
- âœ… Proper build pipeline with `tsc`
- âœ… Environment-specific configurations
- âœ… Proper process management and graceful shutdowns

---

## Version Control

**Last Updated:** Initial creation
**Applies To:** All projects in this workspace
**Review Frequency:** After each major project or when new patterns emerge

**Note:** These conventions should be referenced before making any significant technical decisions or when unsure about implementation approaches. 